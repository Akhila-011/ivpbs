<!DOCTYPE html>
<html>
<head>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyBZL5ajdJR_wnjrvWhIzxTfCP56MQXf0KI",
          authDomain: "ivpbs-f2ca0.firebaseapp.com",
          databaseURL: "https://ivpbs-f2ca0-default-rtdb.firebaseio.com",
          projectId: "ivpbs-f2ca0",
          storageBucket: "ivpbs-f2ca0.appspot.com",
          messagingSenderId: "1049725030175",
          appId: "1:1049725030175:web:c9bbf54d8e6003060e6a2a",
          measurementId: "G-8PXXV5TNTR"
        };
        firebase.initializeApp(firebaseConfig);
      </script>
</head>
<body>
    <form id="loginForm">
        <input id="name" placeholder="Name">
        <br>
        <input id="username" placeholder="Email">
        <br>
        <input type="password" id="password"placeholder="Password">
        <br>
        <input id="institution" placeholder="Institution">
        <br>
        <select id="type">
            <option>Student</option>
            <option>Agency</option>
            <option>Company</option>
        </select>
        <button type="button" onclick="signInWithEmailAndPassword()">Sign In</button>
        <br>
        <button type="button" onclick="signUpWithEmailAndPassword()">Sign Up</button>
      </form>
    <button onclick="googleLogin()">CONTINUE WITH GOOGLE</button>
   
    <script>
        var firestore = firebase.firestore();

        function signUpWithEmailAndPassword() {

            var name = document.getElementById("name").value;
            var email = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var institution= document.getElementById("institution").value;
            var type = document.getElementById("type").value;

            firebase.auth().createUserWithEmailAndPassword(email, password)
            .then((userCredential) => {
                var user = userCredential.user;
                console.log("Signed up as:", user.email);
                var collectionRef = firestore.collection("users");

                var data = {
                    name,
                    email,
                    institution,
                    type
                };
                collectionRef.add(data)
                .then(function(docRef) {
                    console.log("Document written with ID: ", docRef.id);
                })
                .catch(function(error) {
                    console.error("Error adding document: ", error);
                });
            })
            .catch((error) => {
                var errorCode = error.code;
                var errorMessage = error.message;
                console.error("Error signing up:", errorMessage);
            });
  }

       function signInWithEmailAndPassword() {
    var username = document.getElementById("username").value;
    var password = document.getElementById("password").value;

    firebase.auth().signInWithEmailAndPassword(username, password)
      .then((userCredential) => {
        // Signed in
        var user = userCredential.user;
        console.log("Signed in as:", user.email);
      })
      .catch((error) => {
        var errorCode = error.code;
        var errorMessage = error.message;
        console.error("Error signing in:", errorMessage);
      });
  }
        function googleLogin(){
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider)
            .then((result) => {
                const user = result.user;
                
                console.log(user);
            })
            .catch((error) => {
                console.error(error);
            });  
        }
    </script>
</body>
</html>